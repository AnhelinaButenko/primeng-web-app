<div *ngIf="!isLoading; else loading" class="card mt-1">
  <p-messages></p-messages>
  <div class='row'>
    <div class='col-md-4 pb-1' style="color: dimgray">Filter by:</div>
    <div class='col-md-2'>
    <span class="p-input-icon-left pb-1">
    <i class="pi pi-search" style="font-size: 80%"></i>
      <input pInputText type="text" class="p-inputtext-sm" [(ngModel)]="listFilter" />
    </span>
    </div>
  </div>

  <div class="mt-3 mb-3">
    <p-dropdown
      [options]="filterOptions"
      [(ngModel)]="selectedFilterOption"
      (onChange)="onFilterChange($event)"
      optionLabel="label"
      placeholder="Filter products">
    </p-dropdown>
  </div>

<p-table [value]="filteredProducts" [tableStyle]="{ 'min-width': '100%' }">
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 10%;" scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Calorie per 100g</th>
      <th scope="col">Protein per 100g</th>
      <th scope="col">Fat per 100g</th>
      <th scope="col">Carbohydrate per 100g</th>
      <th scope="col">Manufacturer</th>
      <th scope="col">
        <p-button  label="Create" (click)='onCreate()' [raised]="true" size="small"></p-button>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product>
    <tr>
      <td>{{ product.id | number }}</td>
      <td>{{ product.name }}</td>
      <td>{{ product.caloriePer100g | number }}</td>
      <td>{{ product.proteinPer100g | number }}</td>
      <td>{{ product.fatPer100g | number }}</td>
      <td>{{ product.carbohydratePer100g | number }}</td>
      <td>{{ product.manufacturerName }}</td>
      <div class="ml-3 mt-2 mb-2">
        <p-button  label="Update" (click)='onUpdate(product.id)' [text]="true" [raised]="true" size="small"></p-button>
        <div class="mt-2">
          <p-button  label="Delete" (click)='onDelete(product.id)' [text]="true" [raised]="true" [plain]="true" size="small"></p-button>
        </div>
        </div>
    </tr>
  </ng-template>
</p-table>
</div>
<ng-template #loading>
  <p-skeleton styleClass="mb-2" height="2rem"></p-skeleton>
  <p-skeleton styleClass="mb-2" height="2rem"></p-skeleton>
  <p-skeleton styleClass="mb-2" height="2rem"></p-skeleton>
  <p-skeleton styleClass="mb-2" height="2rem"></p-skeleton>
  <p-skeleton styleClass="mb-2" height="2rem"></p-skeleton>
  <p-skeleton styleClass="mb-2" height="2rem"></p-skeleton>
  <p-skeleton styleClass="mb-2" height="2rem"></p-skeleton>
  <p-skeleton styleClass="mb-2" height="2rem"></p-skeleton>
  <p-skeleton styleClass="mb-2" height="2rem"></p-skeleton>
</ng-template>
